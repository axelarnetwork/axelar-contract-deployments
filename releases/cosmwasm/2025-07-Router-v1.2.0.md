# Cosmwasm Router v1.2.0

|                | **Owner**                             |
| -------------- | ------------------------------------- |
| **Created By** | @sdavidson1177 <solomon@interoplabs.io>         |

| **Network**          | **Deployment Status** | **Date**   |
| -------------------- | --------------------- | ---------- |
| ...| ...             | ... |



[Release](https://github.com/axelarnetwork/axelar-amplifier/releases/tag/multisig-v2.1.0)

## Background

Changes in this release:

1. Router stores coordinator's address. This address is given when the router is instantiated. This allows the router to give the coordinator permission to register chains.

## Deployment

- This rollout upgrades the amplifier router contract from `v1.1.0` to `v1.2.0`
- State migration is required. The router must be supplied with the coordinator's address

1. Upload new Router contract

```bash
ts-node cosmwasm/submit-proposal.js store -c Router -t "Upload Router contract v1.2.0" -d "Upload Router contract v1.2.0" --version 1.2.0
```

2. Upgrade Router contract

Provide coordinator address to the router.

```bash
ts-node cosmwasm/submit-proposal.js migrate \
  -c Router \
  -t "Migrate Router to v1.2.0" \
  -d "Router to v1.2.0" \
  --msg '{\"coordinator\": \"$COORDINATOR_ADDRESS\"}' \
  --fetchCodeId \
  --deposit $DEPOSIT_VALUE
```

## Checklist

Verify router contract version

```bash
axelard query wasm contract-state raw $ROUTER_ADDRESS 636F6E74726163745F696E666F -o json | jq -r '.data' | base64 -d
```
Expected output

```bash
{"contract":"router","version":"1.2.0"}
```

Verify coordinator address stored on router

```bash
axelard q wasm contract-state raw --ascii $ROUTER_ADDRESS 'config' -o json | jq -r '.data' | base64 -d
```

Expected output

```bash
{"axelarnet_gateway":"$AXELARNET_GATEWAY_ADDRESS","coordinator":"$COORDINATOR_ADDRESS"}
```
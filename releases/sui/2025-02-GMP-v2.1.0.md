# Sui GMP v1.1.3

|                | **Owner**                              |
| -------------- | -------------------------------------- |
| **Created By** | @blockchainguyy <ayush@interoplabs.io> |
| **Deployment** | @blockchainguyy <ayush@interoplabs.io> |

| **Network**          | **Deployment Status** | **Date**   |
| -------------------- | --------------------- | ---------- |
| **Devnet Amplifier** | Done                  | TBD        |
| **Stagenet**         | Done                  | 09-02-2025 |
| **Testnet**          | Done                  | 19-02-2025 |
| **Mainnet**          | Done                  | 29-02-2025 |

[Release](https://github.com/axelarnetwork/axelar-cgp-sui/releases/tag/v1.1.3)

## Deployment

*Note: This doc is only for Sui deployment on `devnet-amplifier`. Chain name used will be `sui-2`.

Add config for Sui to `devnet-amplifier` config:
```json
{
    "chains": {
        "sui-2": {
            "name": "Sui",
            "axelarId": "sui-2",
            "networkType": "testnet",
            "rpc": "https://sui-testnet-rpc.publicnode.com:443",
            "tokenSymbol": "SUI",
            "chainType": "sui",
            "finality": "1",
            "decimals": 9,
            "approxFinalityWaitTime": 1,
            "contracts": {},
            "explorer": {
                "name": "Suiscan",
                "url": "https://suiscan.xyz/testnet"
            }
        },
    }
}
```

```bash
# Clone latest main and update deps
npm ci
```

Create an `.env` config.

```yaml
PRIVATE_KEY=<sui-deployer-key>
SIGNATURE_SCHEME=secp256k1
ENV=devnet-amplifier
CHAIN=sui-2
```

| Network              | `deployer address`                                                   |
| -------------------- | -------------------------------------------------------------------  |
| **Devnet-amplifier** | `0x1471a8acf730a05a7d720e52c7ef94024c7351502c83b80da5583db2f6b0b8df` |

- Sync move directories
```bash
node sui/deploy-contract.js sync
```

### Utils

```bash
node sui/deploy-contract.js deploy Utils
```

### Version Control

```bash
node sui/deploy-contract.js deploy VersionControl
```

### AxelarGateway

```bash
node sui/deploy-contract.js deploy AxelarGateway --domainSeparator offline --minimumRotationDelay 0 --signers wallet
```

### RelayerDiscovery
```bash
node sui/deploy-contract.js deploy RelayerDiscovery
```

### Gas Service

```bash
node sui/deploy-contract.js deploy GasService
```

### Operators

```bash
node sui/deploy-contract.js deploy Operators
```
#### Gas Collector Configuration
Transfer the OperatorCap for GasService contract to Operators contract
```bash
node sui/operators.js storeCap
```

### Add Operators

Assign `Operator` role to the following addresses:

```bash
node sui/operators.js add <TBD>
node sui/operators.js add <TBD>
```

## Checklist
Should be done once [wasm contract deployment steps is complete](../cosmwasm/2025-02-Sui-GMP-v1.1.0.md)
1. Send a GMP call

```bash
node sui/gateway.js call-contract [destination-chain] [destination-address] 0x1234
```

2. Route GMP call via Amplifier

- https://docs.axelar.dev/dev/amplifier/chain-integration/relay-messages

3.  Submit proof with multisig session id

```bash
node evm/gateway.js -n $CHAIN --action submitProof --multisigSessionId [multisig session id]
```

4. Confirm whether the message is approved

```bash
node evm/gateway.js -n $CHAIN --action isContractCallApproved --commandID [command-id] --sourceChain [destination-chain] --sourceAddress [source-address] --destination [destination-address] --payloadHash 0x1234
```

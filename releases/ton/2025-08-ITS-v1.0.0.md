# TON ITS v1.0.0

|                | **Owner**                              |
| -------------- | -------------------------------------- |
| **Created By** | @dfapel <dominik@commonprefix.com> |
| **Deployment** | @makischristou <makis@commonprefix.com> |

| **Network**          | **Deployment Status** | **Date**   |
| -------------------- | --------------------- | ---------- |
| **Devnet Amplifier** | Deployed              | 2025-08-15 |
| **Stagenet**         | -                     | TBD        |
| **Testnet**          | -                     | TBD        |
| **Mainnet**          | -                     | TBD        |

## Background

This is the initial v1.0.0 release.

## Deployment

- Ensure that ITS Hub has been upgraded to [v1.3.0](../cosmwasm/2025-07-ITS-v1.3.0.md) first.
- The rollout involves deploying TON ITS contracts version `v1.0.` on TON.

1. Clone the [axelar-gmp-sdk-ton](https://github.com/commonprefix/axelar-gmp-sdk-ton) repository:

```bash
git clone git@github.com:commonprefix/axelar-gmp-sdk-ton.git
```

2. Install dependencies:

```bash
npm i
```

3. Deploy InterchainTokenService:

Prerequisites: 
- A funded testnet TON wallet. The easiest choice is to use [Tonkeeper](https://tonkeeper.com/) on a mobile device and fund it using the [testgiver](https://t.me/testgiver_ton_bot) testnet faucet.
- [GMP](2025-07-GMP-v1.0.0.md) is already correctly set up. Let `TON_EDGE_GATEWAY` be the address of the deployed edge gateway.
- Follow the [README instructions](../ton/README.md) to setup the environment 

Let `ITS_OPERATOR` be the address of the intended ITS operator.
Run the DeployInterchainTokenService deployment script:

```bash
npx blueprint run
? Choose file to use (Use arrow keys)
? Choose file to use deployInterchainTokenService
? Which network do you want to use?
? Which network do you want to use? testnet
? Which wallet are you using? (Use arrow keys)
? Which wallet are you using? TON Connect compatible mobile wallet (example: Tonkeeper)
? AxelarGateway address $TON_EDGE_GATEWAY
? Operator address $ITS_OPERATOR
wallet (example: Tonkeeper)
```

Choose `deployInterchainTokenService`, then `testnet` and then `TON Connect compatible wallet`. Scan the QR code from Tonkeeper on your mobile device to connect it. Approve the popup on your Tonkeeper wallet.

### Register TON ITS on ITS Hub

Note: TON ITS doesn't use a custom ITS ABI Translator.
ITS hub contract configuration in json file must include the following attributes per chain:

```bash
"axelar": {
  "contracts": {
    ...
    "InterchainTokenService": {
      ...
      "$CHAIN": {
        "maxUintBits": 256,
        "maxDecimalsWhenTruncating": 255
      }
    }
    ...
  }
}
```

_Note: Mainnet proposal should include a community post for the Registering ITS_

deposit amount is one of:

| Network          | Deposit Amount |
| ---------------- | -------------- |
| devnet-amplifier | 100000000      |
| stagenet         | 100000000      |
| testnet          | 2000000000     |
| mainnet          | 2000000000     |

```bash
ts-node cosmwasm/submit-proposal.js its-hub-register-chains $CHAIN -t "Register ITS for TON chain" -d "Register ITS for TON chain at ITS Hub contract" --deposit $DEPOSIT_AMOUNT
```

### Set trusted chains on TON ITS

To add a trusted chain to TON ITS, run this command:

```bash
node ton/its.js add-trusted-chain <chain-name> <chain-address>
```

To remove a trusted chain from TON ITS, run this command:

```bash
node ton/its.js remove-trusted-chain <chain-name>
```

### Trust TON on ITS edge contracts

```bash
# For these commands, set PRIVATE KEY in .env to the private key for the ITS operator on EVM chains
node evm/its.js --action setTrustedAddress --trustedChain $CHAIN --trustedAddress hub --chainNames all
```

## Checklist

The following checks should be performed after the rollout

- [ ] Test ITS token deployment

```bash
# Deploy Test Tokens
node ton/its.js deploy-interchain-token <salt> <name> <symbol> <decimals> <initial-amount> [minter]

# Deploy Remote Interchain Token
node ton/its.js deploy-remote-interchain-token <salt> <chain-name> [remote-minter]

# Perform Interchain Token Transfer (Outgoing)
node ton/its.js transfer-interchain-token <token-id> <chain-name> <recipient-address> <amount> <jetton-minter>

# Test incoming Interchain Token Transfer
```

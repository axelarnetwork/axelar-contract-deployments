# Stellar GMP v1.0.0

|                | **Owner**                            |
| -------------- | ------------------------------------ |
| **Created By** | @ahramy <ahram@interoplabs.io>       |
| **Deployment** | @RiceAndMeet <steven@interoplabs.io> |

| **Network**          | **Deployment Status** | **Date** |
| -------------------- | --------------------- | -------- |
| **Devnet Amplifier** | -                     | TBD      |
| **Stagenet**         | -                     | TBD      |
| **Testnet**          | -                     | TBD      |
| **Mainnet**          | -                     | TBD      |

- [Crates](https://crates.io/crates/stellar-axelar-gateway/1.0.0)
- [Releases](https://github.com/axelarnetwork/axelar-cgp-stellar/releases/tag/stellar-axelar-gateway-v1.0.0)

## Background

Changes in the release:

1. This is the v1.0.0 initial GMP release.

## Deployment

Create an `.env` config. `CHAIN` should be set to `stellar` for mainnet, and `stellar-2024-q4` for all other networks.

```yaml
PRIVATE_KEY=xyz
ENV=xyz
CHAIN=xyz
```

An initial Stellar chain config needs to be added to `${ENV}.json` file under `chains` key.

```json
"stellar": {
    "name": "Stellar",
    "axelarId": "stellar",
    "rpc": "https://soroban-testnet.stellar.org",
    "horizonRpc": "https://horizon-testnet.stellar.org",
    "networkType": "testnet",
    "chainType": "stellar",
    "decimals": 7,
    "finality": "1",
    "approxFinalityWaitTime": 1,
    "tokenSymbol": "XLM",
    "tokenAddress": "CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC",
    "explorer": {
      "name": "Soroban Nownodes",
      "url": "https://soroban.nownodes.io/testnet"
    },
  "contracts": {}
  }
```

Deploy Stellar Gateway

1. Deploy Gateway

```bash
node stellar/deploy-contract.js deploy axelar_gateway --version v1.0.0
```

2. After deploying the Stellar Gateway, ensure that you [deploy CosmWasm for Stellar GMP v1.0.0](../cosmwasm/2025-01-Stellar-GMP-v1.0.0.md).

- Once all steps are completed, update ampd with the Stellar chain configuration, then follow the remaining steps.

3. Rotate genesis verifier set on Stellar Gateway

```bash
node stellar/gateway.js rotate --chain-name $CHAIN
```

4. Deploy Gas Service

```bash
node stellar/deploy-contract.js deploy axelar_gas_service --version v1.0.0
```

5. Deploy Operators

```bash
node stellar/deploy-contract.js deploy axelar_operators --version v1.0.0
```

6. Deploy Example with dummy ITS address

```bash
node stellar/deploy-contract.js deploy example --version v1.0.0 --use-dummy-its-address
```

## Checklist

The following checks should be performed after the rollout

```bash
ARGS=(
  --keyring-backend test \
  --from wallet \
  --gas auto --gas-adjustment 1.4 \
  --chain-id devnet-amplifier \
  --node http://devnet-amplifier.axelar.dev:26657
)
```

### Stellar â†’ EVM GMP call

```bash
node stellar/gmp.js send avalanche [destination-address] 0x1234 CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC 1

# Change private key and env from Stellar to EVM
node evm/gateway.js -n avalanche --action submitProof --multisigSessionId 3

node ./evm/gateway.js -n avalanche --action isContractCallApproved --commandID [command-id] --sourceChain avalanche --sourceAddress [source-address] --destination [destination-address] --payload 0x1234
```

### EMV -> Stellar GMP Call

```bash
node evm/gateway.js -n avalanche --action callContract --destinationChain stellar --destination [destination-address] --payload 0x1234

# Change private key and env from EVM to Stellar
node stellar/gateway.js submit-proof 1 --chain-name $CHAIN

node stellar/gmp.js execute avalanche [message-id] 0xba76c6980428A0b10CFC5d8ccb61949677A61233 0x1234
```
